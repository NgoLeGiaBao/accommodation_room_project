@using App.Models.ServicesModel
@{
    ViewData["Title"] = "Chi tiết Bài Viết";
}
@model ServicesBlog

<header class="header-section">
    <div class="top-nav">
        <div class="container">
            <div class="row">
                <div class="col-lg-7">
                    <nav class="main-menu">
                        <ul>
                            <li><a asp-action="Home" asp-controller="HomePage">Trang chủ</a></li>
                            <li class="active"><a asp-action="RoomService" asp-controller="HomePage">Nhà trọ, phòng
                                    trọ</a></li>
                            <li><a asp-action="VideoReview" asp-controller="HomePage">Video Review </a>
                            </li>
                            <li><a asp-action="Blog" asp-controller="HomePage">News</a></li>
                        </ul>
                        using System.Security.Cryptography;
    using Microsoft.Build.Evaluation;
                    </nav>
                </div>
                <div class="col-lg-5">
                    <div class="top-right">
                        <div class="language-option">
                            <i class="fa fa-sign-in" aria-hidden="true"></i> <span> Đăng nhập</span>
                            <i class="fa fa-angle-down"></i>
                            <div class="flag-dropdown">
                                <ul>
                                    <li><a asp-area="Account" asp-action="Index" asp-controller="Login">Đăng
                                            nhập</a></li>
                                    <li><a asp-area="Account" asp-action="Index" asp-controller="Login">Đăng
                                            ký</a></li>
                                </ul>
                            </div>
                        </div>
                        <a asp-area="Blog" asp-action="CreateNews" asp-controller="News" class="property-sub"><i
                                class="fa fa-plus" aria-hidden="true"></i> Đăng trọ ngay
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="nav-logo">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="logo">
                        <a href="./index.html"><img src="../../client_part/img/logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="nav-logo-right">
                        <ul>
                            <li>
                                <i class="icon_phone"></i>
                                <div class="info-text">
                                    <span>Phone:</span>
                                    <p>(+84) 345 6789</p>
                                </div>
                            </li>
                            <li>
                                <i class="icon_map"></i>
                                <div class="info-text">
                                    <span>Address:</span>
                                    <p>Ho Chi Minh City</p>
                                </div>
                            </li>
                            <li>
                                <i class="icon_mail"></i>
                                <div class="info-text">
                                    <span>Email:</span>
                                    <p>phongtrotienich@gmail.com</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Property Details Hero Section Begin -->
<section class="pd-hero-section set-bg"
    data-setbg="https://imbfaeyswkneestptfkr.supabase.co/storage/v1/object/public/home_img/@Model.Images[0]">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2">
                <div class="pd-hero-text">
                    <p class="room-location"><i class="icon_pin"></i> @Model.Address</p>
                    <h2>@Model.Title</h2>
                    <div class="room-price">
                        <span>Start Form:</span>
                        <p>@Model.RentalPrice.ToString("#,##0") VND</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Property Details Hero Section Begin -->

<!-- Property Details Section Begin -->
<section class="property-details-section spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-9">
                <div class="pd-details-text">
                    <div class="property-more-pic">
                        <div class="product-pic-zoom">
                            <img style="height: 500px;" class="product-big-img"
                                src="https://imbfaeyswkneestptfkr.supabase.co/storage/v1/object/public/home_img/@Model.Images[0]"
                                alt="Property Image">
                        </div>
                        <div class="product-thumbs">
                            <div class="product-thumbs-track ps-slider owl-carousel">
                                @{
                                    var count_sm = 1;
                                    foreach (var item in Model.Images)
                                    {
                                        if (count_sm > 5) // Giới hạn hiển thị 5 ảnh
                                            break;

                                        <div class="pt @(count_sm == 1 ? "active" : "")"
                                            data-imgbigurl="https://imbfaeyswkneestptfkr.supabase.co/storage/v1/object/public/home_img/@item">
                                            <img class="product-fix-img"
                                                src="https://imbfaeyswkneestptfkr.supabase.co/storage/v1/object/public/home_img/@item"
                                                alt="Property Thumbnail">
                                        </div>

                                        count_sm++;
                                    }
                                }
                            </div>
                        </div>
                    </div>
                    <div class="pd-desc">
                        <h4>Description</h4>
                        <p>@Html.Raw(Model.ContentDescription)</p>
                    </div>
                    <div class="pd-details-tab">
                        <div class="tab-item">
                            <ul class="nav" role="tablist">
                                <li>
                                    <a class="active" style="text-decoration: none;" data-toggle="tab" href="#tab-1" role="tab">Overview</a>
                                </li>
                                <li>
                                    <a style="text-decoration: none;" data-toggle="tab" href="#tab-3" role="tab">Tiện nghi</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-item-content">
                            <div class="tab-content">
                                <!-- Tab 1: Chi tiết phòng -->
                                <div class="tab-pane fade-in active" id="tab-1" role="tabpanel">
                                    <div class="property-more-table">
                                        <table style="width: 100%;">
                                            <tbody>
                                                <tr>
                                                    <td class="pt-name">Giá chỉ từ</td>
                                                    <td class="p-value">@Model.RentalPrice.ToString("#,##0") VND</td>
                                                </tr>
                                                <tr>
                                                    <td class="pt-name">Diện tích phòng từ</td>
                                                    <td class="p-value">@Model.Area m&sup2;</td>
                                                </tr>
                                                <tr>
                                                    <td class="pt-name">Đối tượng</td>
                                                        @{
                                                            var suitableFor = 
                                                                (Model.IsStudent ? "Sinh viên, " : "") +
                                                                (Model.IsWorker ? "Người lao động, " : "") +
                                                                (Model.IsFamily ? "Gia đình, " : "") +
                                                                (Model.IsCouple ? "Cặp đôi" : "");
                                                            if (suitableFor.Length > 2) {
                                                                suitableFor= suitableFor.Substring(0, suitableFor.Length - 2);
                                                            }
                                                        }
                                                    </td>
                                                    <td class="p-value">@suitableFor</td>
                                                </tr>
                                                <tr>
                                                    <td class="pt-name">Môi trường xung quanh</td>
                                                    <td class="p-value">
                                                        @{
                                                            var surroundingEnvironment = 
                                                                (Model.NearSchool ? "Trường học, " : "") +
                                                                (Model.NearPark ? "Công viên, " : "") +
                                                                (Model.NearSupermarket ? "Siêu thị, " : "") +
                                                                (Model.NearHospital ? "Bệnh viện, " : "");

                                                            // Kiểm tra nếu chuỗi không rỗng và có dấu phẩy ở cuối
                                                            if (!string.IsNullOrEmpty(surroundingEnvironment) && surroundingEnvironment.EndsWith(", "))
                                                            {
                                                                surroundingEnvironment = surroundingEnvironment.Substring(0, surroundingEnvironment.Length - 2); // Cắt bỏ 2 ký tự cuối (", ")
                                                            }
                                                        }
                                                        @surroundingEnvironment
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Tab 3: Tiện nghi và dịch vụ -->
                                <div class="tab-pane fade" id="tab-3" role="tabpanel">
                                    <div class="pd-table-amenities">
                                        <p>Các tiện nghi bao gồm:</p>
                                        <ul style="padding-left: 20px;color: #707079;">
                                            @Html.Raw(Model.HasWiFi ? "<li>Wi-Fi miễn phí</li>" : "")
                                            @Html.Raw(Model.HasAirConditioner ? "<li>Máy lạnh</li>" : "")
                                            @Html.Raw(Model.HasWaterHeater ? "<li>Nước nóng</li>" : "")
                                            @Html.Raw(Model.HasPrivateParkingLot ? "<li>Bãi đỗ xe riêng</li>" : "")
                                            @Html.Raw(Model.HasIndoorCleaning ? "<li>Dịch vụ vệ sinh</li>" : "")
                                            @Html.Raw(Model.HasKitchenShelf ? "<li>Kệ bếp</li>" : "")
                                            @Html.Raw(Model.HasWardrobe ? "<li>Tủ quần áo</li>" : "")
                                            @Html.Raw(Model.HasBedAndMattress ? "<li>Giường và nệm</li>" : "")
                                            @Html.Raw(Model.HasTV ? "<li>TV</li>" : "")
                                            @Html.Raw(Model.HasRefrigerator ? "<li>Tủ lạnh</li>" : "")
                                            @Html.Raw(Model.HasSwimmingPool ? "<li>Hồ bơi</li>" : "")
                                            @Html.Raw(Model.HasGarden ? "<li>Sân vườn</li>" : "")
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="property-map">
                        <h4>Map</h4>
                        <div class="map-inside">
                            <iframe
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.8454898481097!2d106.6923273!3d10.7540211!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f978c91ee7d%3A0x25c2f24f54f91578!2s83-85+Đường+số+9,+Tân+Phong,+Quận+7,+Thành+phố+Hồ+Chí+Minh!5e0!3m2!1sen!2sbd!4v1678403155157!5m2!1sen!2sbd"
                                height="320" style="border:0;" allowfullscreen=""></iframe>
                            <div class="icon">
                                <i class="fa fa-home"></i>
                            </div>
                        </div>
                    </div>
                    <div class="property-contactus">
                        <h4>Contact Us</h4>
                        <div class="row">
                            <div class="col-lg-5">
                                <div class="agent-desc">
                                    <img src="../../client_part/img/properties/agent-contact.jpg" alt="">
                                    <div class="agent-title">
                                        <h5>@ViewData["UserName"]</h5>
                                        <span>Owner</span>
                                    </div>
                                    <div class="agent-social">
                                        <a href="#"><i class="fa fa-facebook"></i></a>
                                        <a href="#"><i class="fa fa-twitter"></i></a>
                                        <a href="#"><i class="fa fa-google-plus"></i></a>
                                        <a href="#"><i class="fa fa-envelope"></i></a>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-lg-6 offset-lg-1">
                                <form action="#" class="agent-contact-form">
                                    <input type="text" placeholder="Name*">
                                    <input type="text" placeholder="Email">
                                    <textarea placeholder="Messages"></textarea>
                                    <button type="submit" class="site-btn">Send Message</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="property-sidebar">
                    <h4>Tìm Kiếm Phòng Trọ</main>
                    </h4>
                    <form id="searchForm" class="sidebar-search" action="/room-service" method="get"
                        class="sidebar-search">
                        <select class="nice-select" style="font-size: 16px; color: #707079;" id="tinh" name="Province"
                            title="Chọn Tỉnh Thành">
                            <option value="0">Tỉnh Thành</option>
                        </select>
                        <select class="nice-select" style="font-size: 16px; color: #707079;" id="quan" name="District"
                            title="Chọn Quận Huyện">
                            <option value="0">Quận Huyện</option>
                        </select>
                        <select class="nice-select" style="font-size: 16px; color: #707079;" id="phuong" name="Town"
                            title="Chọn Phường Xã">
                            <option value="0">Phường Xã</option>
                        </select>
                        <div class="room-size-range">
                            <div class="price-text">
                                <label for="roomsizeRangeP">Size:</label>
                                <input type="text" id="roomsizeRangeP" readonly>
                            </div>
                            <div id="roomsize-range-P" class="slider"></div> <!-- Slider container -->
                        </div>
                        <div class="price-range-wrap">
                            <div class="price-text">
                                <label for="priceRangeP">Price:</label>
                                <input style="width: auto;" type="text" id="priceRangeP" readonly>
                            </div>
                            <div id="price-range-P" class="slider"></div> <!-- Slider container -->
                        </div>
                        <button type="submit" class="search-btn">Tìm Kiếm</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

@* Link CSS *@
@section AdditionalLinkCSS {
    <style>
        .product-fix-img {
            height: 118px;
        }

        .pt-name {
            width: 225px !important;
        }
        
        #tinh {
            display: block !important;
            visibility: visible !important;
        }

        #quan {
            display: block !important;
            visibility: visible !important;
        }

        #phuong {
            display: block !important;
            visibility: visible !important;
        }
    </style>
}
@* Link Javascript*@
@section AdditionalLinkJavascript {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="~/js/introduction/service_blog.js"></script>
}